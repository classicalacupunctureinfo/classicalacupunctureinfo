<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CA Info Hub</title>
    <style>
        :root {
            --bg: #e0f2f1;
            --surface: #ffffff;
            --primary: #004d40;
            --accent: #00796b;
            --text: #00241f;
            --shadow: rgba(0, 77, 64, 0.12);
        }

        [data-theme="dark"] {
            --bg: #00241f;
            --surface: #00332c;
            --primary: #4db6ac;
            --accent: #80cbc4;
            --text: #e0f2f1;
            --shadow: rgba(0, 0, 0, 0.4);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            transition: background 0.3s ease;
        }

        /* Modern Toggle */
        .top-bar {
            width: 100%;
            padding: 15px;
            display: flex;
            justify-content: flex-end;
            box-sizing: border-box;
        }

        #theme-btn {
            background: var(--surface);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
            letter-spacing: 1px;
            cursor: pointer;
        }

        .main-container {
            width: 100%;
            max-width: 400px;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }

        /* Glassmorphism Card */
        .card {
            background: var(--surface);
            padding: 30px 20px;
            border-radius: 24px;
            box-shadow: 0 10px 30px var(--shadow);
            margin-top: 20px;
        }

        h1 { font-size: 24px; margin-bottom: 25px; font-weight: 300; }

        input[type="password"] {
            width: 100%;
            padding: 16px;
            margin-bottom: 20px;
            border: 1.5px solid #cfd8dc;
            border-radius: 12px;
            background: var(--bg);
            color: var(--text);
            font-size: 16px;
            box-sizing: border-box;
            outline: none;
        }

        .btn-prime {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: var(--bg);
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            box-shadow: 0 4px 12px var(--shadow);
        }

        /* Legacy-Compatible Grid */
        #dashboard {
            display: none;
            width: 100%;
            overflow: hidden;
        }

        .menu-row {
            width: 100%;
            display: block;
            margin-bottom: 15px;
        }

        .menu-item {
            width: 46%;
            margin: 2%;
            float: left;
            background: var(--surface);
            height: 130px;
            border-radius: 20px;
            display: table;
            text-decoration: none;
            color: var(--text);
            box-shadow: 0 6px 15px var(--shadow);
            border: 1px solid rgba(128, 203, 196, 0.2);
            box-sizing: border-box;
            transition: transform 0.2s;
        }

        .menu-item span {
            display: table-cell;
            vertical-align: middle;
            font-weight: 500;
            font-size: 14px;
            padding: 10px;
        }

        .menu-row:after { content: ""; display: table; clear: both; }

        .logout-link {
            display: inline-block;
            margin-top: 30px;
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            opacity: 0.7;
        }
    </style>
</head>
<body onload="checkAuth()">

    <div class="top-bar">
        <button id="theme-btn" onclick="toggleTheme()">DARK MODE</button>
    </div>

    <div class="main-container">
        <div id="login-screen" class="card">
            <h1>Portal Access</h1>
            <input type="password" id="pw" placeholder="Password">
            <button class="btn-prime" onclick="login()">ENTER</button>
        </div>

        <div id="dashboard">
            <h1 id="dash-title">Dashboard</h1>
            <div class="menu-row">
                <a href="5elements.html" class="menu-item"><span>Five Elements</span></a>
                <a href="connecting_points.html" class="menu-item"><span>Connecting Points</span></a>
            </div>
            <div class="menu-row">
                <a href="meridian.html" class="menu-item"><span>Meridian</span></a>
                <a href="misc.html" class="menu-item"><span>Miscellaneous</span></a>
            </div>
            <a href="#" class="logout-link" onclick="logout()">Sign Out</a>
        </div>
    </div>

    <script>
        // --- Cookie Management ---
        function setCookie(name, value) {
            // No 'expires' means it is a Session Cookie (clears when browser closes)
            document.cookie = name + "=" + value + "; path=/; SameSite=Lax";
        }

        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        // --- Auth Logic ---
        function checkAuth() {
            // Restore Theme preference (still using localStorage for theme as it's not sensitive)
            if (localStorage.getItem('dark') === 'true') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('theme-btn').innerText = 'LIGHT MODE';
            }

            if (getCookie("authenticated") === "true") {
                showDashboard();
            }
        }

        function login() {
            var input = document.getElementById('pw').value;
            if (input === "CAinfo@60") {
                setCookie("authenticated", "true");
                showDashboard();
            } else {
                alert("Access Denied");
            }
        }

        function showDashboard() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
        }

        function logout() {
            document.cookie = "authenticated=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";
            location.reload();
        }

        // --- Theme Logic ---
        function toggleTheme() {
            var isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            if (isDark) {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('dark', 'false');
                document.getElementById('theme-btn').innerText = 'DARK MODE';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('dark', 'true');
                document.getElementById('theme-btn').innerText = 'LIGHT MODE';
            }
        }
    </script>
</body>
</html>
