<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elements - Connecting Points</title>

  <style>
    :root{
      /* âœ… lighter + soothing palette */
      --bg1:#f6fbff;
      --bg2:#f9fffe;
      --card:#ffffff;
      --text:#16312c;
      --muted:#56706a;
      --accent:#5cc8b4;
      --accent2:#3fb7a1;
      --border:#e2f1ee;
      --shadow: 0 10px 28px rgba(0,0,0,0.08);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
      min-height: 100vh;
      padding: 14px;
    }

    .wrap{
      max-width: 560px;
      margin: 0 auto;
      min-height: calc(100vh - 28px);
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    /* ðŸ”¥ Header area moves based on "active" state */
    .topControls{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      transition: all 0.35s ease;
    }

    /* Initial: controls appear centered */
    .wrap.centerMode{
      justify-content:center;
      align-items:stretch;
    }
    .wrap.centerMode .topControls{
      max-width: 520px;
      margin: 0 auto;
    }

    /* After user finds: controls move to top and layout opens */
    .wrap.activeMode{
      justify-content:flex-start;
    }

    .controlsRow{
      display:grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 10px;
      align-items:center;
    }

    select{
      width: 100%;
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      outline: none;
      font-size: 1rem;
      background: #ffffff;
      color: var(--text);
      box-shadow: 0 4px 14px rgba(0,0,0,0.03) inset;
    }

    select:focus{
      border-color: var(--accent2);
      box-shadow: 0 0 0 3px rgba(63,183,161,0.16);
    }

    button{
      border: none;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 900;
      font-size: 1rem;
      cursor:pointer;
      white-space:nowrap;
    }

    .findBtn{
      background: linear-gradient(180deg, var(--accent), var(--accent2));
      color: white;
      min-width: 88px;
    }

    .miniBtns{
      display:flex;
      gap: 10px;
    }

    .ghostBtn{
      background: #f2fffc;
      border: 1px solid var(--border);
      color: #247b6c;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      font-size: 0.95rem;
      cursor:pointer;
    }

    /* Content section appears only after Find */
    .content{
      display:none;
      gap: 14px;
      flex-direction:column;
    }

    .wrap.activeMode .content{
      display:flex;
      animation: fadeIn 0.35s ease;
    }

    @keyframes fadeIn{
      from{ opacity:0; transform: translateY(6px); }
      to{ opacity:1; transform: translateY(0); }
    }

    /* Connecting Points box (scrollable) */
    .panel{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .panelTitle{
      margin:0 0 10px;
      font-weight: 900;
      font-size: 1rem;
      color: var(--muted);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
    }

    .badge{
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #f5fffd;
      color: var(--muted);
      font-size: 0.82rem;
      font-weight: 800;
      white-space: nowrap;
    }

    .scrollBox{
      border: 1px solid var(--border);
      border-radius: 16px;
      background: #fbffff;
      padding: 12px;
      max-height: 190px;
      overflow:auto;
    }

    .block{
      border: 1px solid var(--border);
      background: #ffffff;
      border-radius: 16px;
      padding: 12px;
      margin-bottom: 10px;
    }
    .block:last-child{ margin-bottom:0; }

    .blockHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .pill{
      padding: 5px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 0.85rem;
      border: 1px solid var(--border);
    }
    .yin{ background:#f0fffb; color:#1c7264; }
    .yang{ background:#fff8f0; color:#7a4b16; }

    .points{
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
    }

    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      background: #f2fffb;
      border: 1px solid var(--border);
      font-weight: 900;
      font-size: 0.92rem;
      color: var(--text);
    }

    .emptyState{
      color: var(--muted);
      font-size: 0.95rem;
      line-height: 1.4;
    }

    /* Image box */
    .imgBox{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 12px;
      overflow:hidden;
    }

    .imgPlaceholder{
      width: 100%;
      aspect-ratio: 4 / 3;
      border-radius: 18px;
      background: linear-gradient(135deg, #e6fbff, #f7ffe9);
      border: 1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      color: rgba(22,49,44,0.5);
      font-size: 1.1rem;
    }

    /* Description box */
    .descBox{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    .descTitle{
      margin:0 0 8px;
      font-weight: 900;
      font-size: 1rem;
      color: var(--muted);
    }

    .descText{
      margin:0;
      color: var(--text);
      line-height: 1.45;
      font-size: 0.95rem;
    }

    /* Mobile touch spacing */
    @media (max-width: 420px){
      .controlsRow{
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto;
      }
      .controlsRow button{
        grid-column: 1 / -1;
      }
    }
  </style>
</head>

<body>
  <div class="wrap centerMode" id="wrap">
    <!-- Controls -->
    <div class="topControls">
      <div class="controlsRow">
        <select id="el1">
          <option value="" selected disabled>Element-1</option>
          <option value="FIRE">FIRE</option>
          <option value="EARTH">EARTH</option>
          <option value="AIR">AIR</option>
          <option value="WATER">WATER</option>
          <option value="WOOD">WOOD</option>
        </select>

        <select id="el2">
          <option value="" selected disabled>Element-2</option>
          <option value="FIRE">FIRE</option>
          <option value="EARTH">EARTH</option>
          <option value="AIR">AIR</option>
          <option value="WATER">WATER</option>
          <option value="WOOD">WOOD</option>
        </select>

        <button class="findBtn" id="btnFind">Find</button>
      </div>

      <div class="miniBtns">
        <button class="ghostBtn" id="btnSwap">Swap</button>
        <button class="ghostBtn" id="btnReset">Reset</button>
      </div>
    </div>

    <!-- Content (appears after Find) -->
    <div class="content" id="content">
      <!-- Connecting Points box -->
      <div class="panel">
        <div class="panelTitle">
          <span>Connecting Points</span>
          <span class="badge" id="pairBadge">â€”</span>
        </div>

        <div class="scrollBox" id="outputBox"></div>
      </div>

      <!-- Image placeholder -->
      <div class="imgBox">
        <div class="imgPlaceholder" id="imgHolder">Image Placeholder</div>
      </div>

      <!-- Description -->
      <div class="descBox">
        <div class="descTitle">Description</div>
        <p class="descText" id="descText">
          Select two elements and tap <b>Find</b>. Later, this section can show
          details fetched from your database based on the connecting point codes.
        </p>
      </div>
    </div>
  </div>

  <script>
    // âœ… Data structure kept same (easy to connect DB later)
    const matrix = {
      FIRE: {
        FIRE:  { yin:["HT-8","PC-8"],            yang:["SI-5","TW-6"] },
        EARTH: { yin:["HT-7","PC-7","SP-2"],     yang:["SI-8","TW-10","ST-41"] },
        AIR:   { yin:["HT-4","PC-5","LU-10"],    yang:["SI-1","TW-1","LI-5"] },
        WATER: { yin:["HT-3","PC-3","KD-2"],     yang:["SI-2","TW-2","UB-60"] },
        WOOD:  { yin:["HT-9","PC-9","LV-2"],     yang:["ST-3","TW-3","GB-38"] }
      },
      EARTH: {
        FIRE:  { yin:[],                        yang:[] },
        EARTH: { yin:["SP3"],                   yang:["ST36"] },
        AIR:   { yin:["SP-5","LU-9"],           yang:["ST-45","LI-11"] },
        WATER: { yin:["SP-9","KD-3"],           yang:["ST-44","UB-40"] },
        WOOD:  { yin:["SP-1","LV-3"],           yang:["ST-43","GB-34"] }
      },
      AIR: {
        FIRE:  { yin:[],                        yang:[] },
        EARTH: { yin:[],                        yang:[] },
        AIR:   { yin:["LU-8"],                  yang:["LI-1"] },
        WATER: { yin:["LU-5","KD-7"],           yang:["LI-2","UB-67"] },
        WOOD:  { yin:["LU-11","LV-4"],          yang:["LI-3","GB-44"] }
      },
      WATER: {
        FIRE:  { yin:[],                        yang:[] },
        EARTH: { yin:[],                        yang:[] },
        AIR:   { yin:[],                        yang:[] },
        WATER: { yin:["KD-10"],                 yang:["UB66"] },
        WOOD:  { yin:["KD-1","LV-8"],           yang:["UB-65","GB-43"] }
      },
      WOOD: {
        FIRE:  { yin:[],                        yang:[] },
        EARTH: { yin:[],                        yang:[] },
        AIR:   { yin:[],                        yang:[] },
        WATER: { yin:[],                        yang:[] },
        WOOD:  { yin:["LV-1"],                  yang:["GB-41"] }
      }
    };

    const wrap = document.getElementById("wrap");
    const content = document.getElementById("content");

    const el1 = document.getElementById("el1");
    const el2 = document.getElementById("el2");
    const btnFind = document.getElementById("btnFind");
    const btnSwap = document.getElementById("btnSwap");
    const btnReset = document.getElementById("btnReset");

    const outputBox = document.getElementById("outputBox");
    const pairBadge = document.getElementById("pairBadge");
    const descText = document.getElementById("descText");
    const imgHolder = document.getElementById("imgHolder");

    function chips(list){
      if(!list || list.length === 0){
        return `<div class="emptyState">No points available for this pair.</div>`;
      }
      return `
        <div class="points">
          ${list.map(x => `<span class="chip">${x}</span>`).join("")}
        </div>
      `;
    }

    function renderResult(a, b){
      const cell = matrix?.[a]?.[b];
      pairBadge.textContent = `${a} Ã— ${b}`;

      if(!cell){
        outputBox.innerHTML = `<div class="emptyState">No mapping exists for this pair.</div>`;
        descText.innerHTML = `No data found for <b>${a}</b> Ã— <b>${b}</b>.`;
        imgHolder.textContent = "No Image";
        return;
      }

      outputBox.innerHTML = `
        <div class="block">
          <div class="blockHead">
            <strong>Connecting Points</strong>
            <span class="pill yin">YIN</span>
          </div>
          ${chips(cell.yin)}
        </div>

        <div class="block">
          <div class="blockHead">
            <strong>Connecting Points</strong>
            <span class="pill yang">YANG</span>
          </div>
          ${chips(cell.yang)}
        </div>
      `;

      // âœ… Placeholder for future DB
      // Example later:
      // fetch(`/api/points?yin=${cell.yin.join(",")}&yang=${cell.yang.join(",")}`)
      descText.innerHTML = `
        Showing results for <b>${a}</b> Ã— <b>${b}</b>.
        This description can later come from your database using these point codes.
      `;
      imgHolder.textContent = "Image Placeholder";
    }

    function setActiveMode(active){
      if(active){
        wrap.classList.remove("centerMode");
        wrap.classList.add("activeMode");
      }else{
        wrap.classList.remove("activeMode");
        wrap.classList.add("centerMode");
      }
    }

    // âœ… Initial state: NO inputs selected, ONLY controls visible in center
    setActiveMode(false);
    outputBox.innerHTML = "";

    btnFind.addEventListener("click", () => {
      const a = el1.value;
      const b = el2.value;

      if(!a || !b){
        alert("Please select both Element-1 and Element-2.");
        return;
      }

      setActiveMode(true);
      renderResult(a, b);

      // Bring controls to top smoothly
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    btnSwap.addEventListener("click", () => {
      const a = el1.value;
      const b = el2.value;

      if(!a || !b){
        alert("Select both elements first, then swap.");
        return;
      }

      el1.value = b;
      el2.value = a;

      // If already active, update results immediately
      if(wrap.classList.contains("activeMode")){
        renderResult(el1.value, el2.value);
      }
    });

    btnReset.addEventListener("click", () => {
      el1.value = "";
      el2.value = "";

      // Hide everything except dropdowns + buttons, move to center again
      setActiveMode(false);
      outputBox.innerHTML = "";
      pairBadge.textContent = "â€”";
      imgHolder.textContent = "Image Placeholder";
      descText.innerHTML = `Select two elements and tap <b>Find</b>.`;
    });
  </script>
</body>
  </html>
